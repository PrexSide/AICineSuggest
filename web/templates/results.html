<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Search Results - AI Movie Recommender</title>
	<link rel="stylesheet" href="/static/styles.css">
</head>
<body>
	<div class="container">
		<a class="back" href="/">← Back</a>
		<h1>Results for: <em>{{ query }}</em></h1>
		<form method="get" class="form" title="Refine results">
			<input type="hidden" name="q" value="{{ query }}">
			<input type="number" name="k" value="12" min="3" max="50" placeholder="Results count" title="How many results to show">
			<select name="genre" title="Genre filter">
				<option value="">All genres (no filter)</option>
				{% for g in genres %}<option value="{{ g }}" {% if selected_genre==g %}selected{% endif %}>{{ g }}</option>{% endfor %}
			</select>
			<input type="number" name="year_min" value="{{ year_min }}" placeholder="1990" title="Only show movies from this year and newer" min="1900" max="2030">
			<input type="number" name="year_max" value="{{ year_max }}" placeholder="2020" title="Only show movies from this year and earlier" min="1900" max="2030">
			<select name="sort" title="Sort order">
				<option value="relevance" {% if sort=='relevance' %}selected{% endif %}>Relevance (best match first)</option>
				<option value="year_desc" {% if sort=='year_desc' %}selected{% endif %}>Year ↓ (newer first)</option>
				<option value="year_asc" {% if sort=='year_asc' %}selected{% endif %}>Year ↑ (older first)</option>
				<option value="title" {% if sort=='title' %}selected{% endif %}>Title A–Z</option>
			</select>
			<button type="submit" title="Apply filters and sorting">Apply</button>
			<button type="button" id="copy-link" title="Copy the current page link with parameters">Copy link</button>
		</form>
		<div class="grid">
			{% for r in results %}
			<div class="card">
				{% if r.poster %}<img class="poster" src="{{ r.poster }}" alt="poster of {{ r.title }}">{% endif %}
				<h3>{{ r.title }}{% if r.year %} ({{ r.year }}){% endif %}</h3>
				<div class="muted">{{ r.genres }}</div>
				{% if r.overview %}<p>{{ r.overview }}</p>{% endif %}
				<a class="pill" href="/similar?title={{ r.title }}" title="Find movies similar to {{ r.title }}">Find similar</a>
			</div>
			{% else %}
			<div>No matches found.</div>
			{% endfor %}
		</div>
	</div>
	<script src="/static/app.js"></script>
</body>
</html>
